{% extends "master.html" %}

<!-- load static -->
{% load static %}

<!-- title -->
{% block title %} SWBC | Soul Winning Believers Church {% endblock %}

<!-- content -->
{% block content %}

<!-- header -->
<header id="home" class="header">
  <div class="overlay text-white text-center">
    <h1 class="display-3 font-weight-bold my-3">Soul Winning Believers</h1>
    <h1 class="display-3 font-weight-bold mb-5">Church</h1>
    <a class="btn btn-lg btn-primary" href="#gallery">View Our gallery</a>
  </div>
</header>

<!--  About Section  -->
<div id="about" class="container-fluid wow fadeIn" data-wow-duration="1.5s">
  <div class="row">
    <div class="col-lg-6 has-img-bg"></div>
    <div class="col-lg-6">
      <div class="row justify-content-center">
        <div class="col-sm-11 py-4 my-4">
          <h2 class="mb-4">About Us</h2>
          <h4 class="mb-2 text-primary">It's a Place Where</h4>
          <ul class="list-group">
            <li class="list-group-item">
              We are addicted to evangelism in season and out of season
            </li>
            <li class="list-group-item">
              We take the ministry not for fame, wealth creation, social status,
              or as a means to drive personal ambition
            </li>
            <li class="list-group-item">
              We choose the path of honour of those God placed over us
            </li>
            <li class="list-group-item">
              We esteem spiritual relationship over other relationships
            </li>
            <li class="list-group-item">
              We are given to correct bible interpretation
            </li>
            <li class="list-group-item">
              We are all committed to pray continually (prayer has no
              department)
            </li>
            <li class="list-group-item">
              We know how to abound and abase with things
            </li>
            <li class="list-group-item">
              We are not ignorant concerning spiritual gifts
            </li>
            <li class="list-group-item">
              We have a strong circle that keeps ourselves accountable and
              teachable
            </li>
            <li class="list-group-item">We give as a responsibility</li>
            <li class="list-group-item">
              We are consecrated to do the work of ministry
            </li>
          </ul>

          <h4 class="my-2 text-primary">When We Gather</h4>
          <ul class="list-group">
            <li class="list-group-item">We gather for better</li>
            <li class="list-group-item">
              We open our mouth to sing and lift our hands as the posture for
              worship
            </li>
            <li class="list-group-item">We take to instructions</li>
            <li class="list-group-item">
              We gather for explanation of the scripture
            </li>
            <li class="list-group-item">Our bible, note and pen are ready</li>
            <li class="list-group-item">We gather to be taught for hours</li>
            <li class="list-group-item">We gather to pray for hours</li>
            <li class="list-group-item">
              We place premium value on who God has placed over us
            </li>
            <li class="list-group-item">We despise not prophecies</li>
            <li class="list-group-item">NO ENTERTAINMENT, NO COMEDY</li>
            <li class="list-group-item">
              EVERYTING IS DONE DECENTLY AND IN ORDER
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!--  gallery Section  -->
<div
  id="gallery"
  class="text-center bg-dark text-light has-height-md middle-items wow fadeIn"
>
  <h2 class="section-title">GALLERY</h2>
</div>
<div class="gallery row">
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-1.jpg' %}"
      alt=" "
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-1.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-2.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-2.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-3.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-3.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-4.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-4.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-5.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-5.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-6.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-6.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-7.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-7.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-8.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-8.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-9.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-9.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-10.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-10.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-11.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-11.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
  <div
    class="col-sm-6 col-lg-3 gallery-item wow fadeIn"
    onclick="toggleOverlay(this)"
  >
    <img
      src="{% static 'assets/imgs/gallery-12.jpg' %}"
      alt=""
      class="gallery-img"
    />
    <a role="button" class="gallery-overlay">
      <i class="gallery-icon ti-plus"></i>
    </a>
    <div class="large-overlay" id="overlay">
      <img
        src="{% static 'assets/imgs/gallery-12.jpg' %}"
        alt="Image Alt Text"
        id="largeImage"
      />
    </div>
  </div>
</div>

<!-- SERVICES Section  -->
<div
  id="services"
  class="container-fluid bg-dark text-light py-5 text-center wow fadeIn"
>
  <h2 class="section-title py-5">OUR SERVICES</h2>
  <div class="row justify-content-center">
    <div class="col-sm-7 col-md-5 mb-5">
      <ul
        class="nav nav-pills nav-justified mb-3"
        id="pills-tab"
        role="tablist"
      >
        <li class="nav-item">
          <a
            class="nav-link active text-white"
            id="pills-home-tab"
            data-toggle="pill"
            href="#weekly"
            role="tab"
            aria-controls="pills-home"
            aria-selected="true"
            >Weekly Services</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link text-white"
            id="pills-profile-tab"
            data-toggle="pill"
            href="#special"
            role="tab"
            aria-controls="pills-profile"
            aria-selected="false"
            >Special Services</a
          >
        </li>
      </ul>
    </div>
  </div>
  <!-- Weekly Services -->
  <div class="tab-content" id="pills-tabContent">
    <div
      class="tab-pane fade show active"
      id="weekly"
      role="tabpanel"
      aria-labelledby="pills-home-tab"
    >
      <div class="services-carousel-wrapper" data-carousel="weekly">
        <button class="carousel-nav-btn carousel-nav-prev" onclick="scrollServices('weekly', -1)" aria-label="Previous">
          <i class="ti-angle-left"></i>
        </button>
        <div class="services-carousel-container">
          <div class="services-carousel" id="weeklyCarousel">
            {% if use_default_weekly %}
              {% for service in weekly_services %}
              <div class="service-card-item">
                <div class="card bg-transparent border my-3 my-md-0">
                  <div class="service-image-wrapper">
                    <img
                      src="{% static service.feature_pic_path %}"
                      alt="{{ service.title }}"
                      class="rounded-0 card-img-top mg-responsive service-image"
                      onerror="this.onerror=null; this.style.display='none';"
                    />
                  </div>
                  <div class="card-body">
                    <h4 class="text-center mb-2">
                      <span class="badge badge-primary">{{ service.time }}</span>
                    </h4>
                    <h5 class="pt20 pb20">{{ service.day }}</h5>
                    <p class="text-white">{{ service.title }}</p>
                  </div>
                </div>
              </div>
              {% endfor %}
            {% else %}
              {% for service in weekly_services %}
              <div class="service-card-item">
                <div class="card bg-transparent border my-3 my-md-0">
                  <div class="service-image-wrapper">
                    <img
                      src="{{ service.feature_pic.url }}"
                      alt="{{ service.title }}"
                      class="rounded-0 card-img-top mg-responsive service-image"
                      onerror="this.onerror=null; this.style.display='none';"
                    />
                  </div>
                  <div class="card-body">
                    <h4 class="text-center mb-2">
                      <span class="badge badge-primary">{{ service.time }}</span>
                    </h4>
                    <h5 class="pt20 pb20">{{ service.day }}</h5>
                    <p class="text-white">{{ service.title }}</p>
                  </div>
                </div>
              </div>
              {% endfor %}
            {% endif %}
          </div>
        </div>
        <button class="carousel-nav-btn carousel-nav-next" onclick="scrollServices('weekly', 1)" aria-label="Next">
          <i class="ti-angle-right"></i>
        </button>
      </div>
    </div>
    <!-- Special Services -->
    <div
      class="tab-pane fade"
      id="special"
      role="tabpanel"
      aria-labelledby="pills-profile-tab"
    >
      {% if special_services %}
      <div class="services-carousel-wrapper" data-carousel="special">
        <button class="carousel-nav-btn carousel-nav-prev" onclick="scrollServices('special', -1)" aria-label="Previous">
          <i class="ti-angle-left"></i>
        </button>
        <div class="services-carousel-container">
          <div class="services-carousel" id="specialCarousel">
            {% for service in special_services %}
            <div class="service-card-item">
              <div class="card bg-transparent border my-3 my-md-0">
                <img
                  src="{{service.feature_pic.url}}"
                  alt="{{service.title}}"
                  class="rounded-0 card-img-top mg-responsive special-img-top"
                />
                <div class="card-body">
                  <h5 class="pt-2 pb-2">{{service.title}}</h5>
                  <h6 class="text-center mb-4">
                    <button
                      class="btn btn-sm btn-primary"
                      role="button"
                      data-bs-toggle="modal"
                      data-bs-target="#service_details{{service.id}}"
                    >
                      More Details
                    </button>
                  </h6>
                </div>
              </div>
            </div>
            <!-- Modal -->
            <div
              class="modal fade"
              id="service_details{{service.id}}"
              tabindex="-1"
              aria-labelledby="service_detailsLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-scrollable">
                <div
                  class="modal-content service-modal"
                  style="background-image: url('{{service.feature_pic.url}}'); background-size: cover;"
                >
                  <div class="overlay">
                    <div class="modal-header">
                      <h1 class="modal-title fs-4" id="service_detailsLabel">
                        {{service.title}}
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">{{service.details}}</div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-primary"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        <button class="carousel-nav-btn carousel-nav-next" onclick="scrollServices('special', 1)" aria-label="Next">
          <i class="ti-angle-right"></i>
        </button>
      </div>
      {% else %}
      <div class="text-center py-5">
        <p class="text-muted">No special services yet.</p>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- NEWS & EVENTS Section  -->
<div
  id="events"
  class="container-fluid wow fadeIn bg-dark text-light py-5"
>
  <h2 class="section-title my-5 text-center">NEWS & EVENTS</h2>
  <div class="row justify-content-center">
    {% for latest in latest_newsevents %}
    <div class="col-md-4 col-sm-6 my-3">
      <article class="newsevent-card">
        {% if latest.feature_pic %}
        <div class="newsevent-image-wrapper">
          <img
            src="{{latest.feature_pic.url}}"
            alt="{{latest.title}}"
            class="newsevent-image"
            loading="lazy"
          />
        </div>
        {% endif %}
        <div class="newsevent-content">
          <h4 class="newsevent-title">{{latest.title}}</h4>
          <time class="newsevent-date">{{latest.date_updated|date:"M. d, Y"}}</time>
          <p class="newsevent-excerpt">
            {{latest.content|safe|truncatewords:25}}
          </p>
          <a href="newsevents/details/{{latest.id}}" class="newsevent-link">
            Read More
          </a>
        </div>
      </article>
    </div>
    {% endfor %}
  </div>
  <div class="text-center mt-5 mb-4">
    <a href="/newsevents" class="btn btn-lg btn-primary">MORE EVENTS</a>
  </div>
</div>

<!-- CONTACT Section  -->
<div
  id="contact"
  class="container-fluid bg-dark text-light border-top wow fadeIn"
>
  <div class="row">
    <div class="col-md-6 px-0">
      <!-- google maps -->
      <div id="map" style="width: 100%; height: 100%; min-height: 400px">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3089.3057200366884!2d2.986596673652676!3d6.901026418663885!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x103b0f065f547873%3A0xa49fcdbb47741598!2sAhmadiyya%20Mosque!5e1!3m2!1sen!2sng!4v1705781676598!5m2!1sen!2sng"
          width="100%"
          height="450"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>
    <div class="col-md-6 px-5 has-height-lg middle-items">
      <h3>FIND US</h3>
      <div class="text-muted">
        <p>
          <span class="ti-location-pin pr-3"></span>SWBC Chapel, Beside
          Ahmadiyya Mosque, off Olorunkemi, Express Road, Ilaro, Ogun State
        </p>
        <p><span class="ti-tablet pr-3"></span>+2347082079988</p>
        <p><span class="ti-tablet pr-3"></span>+2348160676603</p>
        <p><span class="ti-email pr-3"></span>swdmissions@gmail.com</p>
        <p>
          <a href="https://www.facebook.com/SWD4Christ" class="text-muted"
            ><span class="ti-facebook pr-3"></span>SWD4Christ</a
          >
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  function scrollServices(carouselType, direction) {
    const carousel = document.getElementById(carouselType + 'Carousel');
    if (!carousel) return;
    
    const container = carousel.parentElement;
    const scrollAmount = container.offsetWidth * 0.25; // Scroll by 1 item (25% of container width for 4 items)
    const currentScroll = container.scrollLeft || 0;
    const maxScroll = carousel.scrollWidth - container.offsetWidth;
    
    let newScroll;
    if (direction === 1) {
      // Scroll right
      newScroll = Math.min(currentScroll + scrollAmount, maxScroll);
    } else {
      // Scroll left
      newScroll = Math.max(currentScroll - scrollAmount, 0);
    }
    
    container.scrollTo({
      left: newScroll,
      behavior: 'smooth'
    });
    
    // Update arrow visibility after scroll
    setTimeout(() => updateArrows(carouselType), 300);
  }
  
  function updateArrows(carouselType) {
    const carousel = document.getElementById(carouselType + 'Carousel');
    if (!carousel) return;
    
    const container = carousel.parentElement;
    const wrapper = document.querySelector(`[data-carousel="${carouselType}"]`);
    if (!wrapper) return;
    
    const prevBtn = wrapper.querySelector('.carousel-nav-prev');
    const nextBtn = wrapper.querySelector('.carousel-nav-next');
    
    if (!prevBtn || !nextBtn) return;
    
    const scrollLeft = container.scrollLeft || 0;
    const maxScroll = carousel.scrollWidth - container.offsetWidth;
    
    // Show/hide arrows based on scroll position
    if (scrollLeft <= 5) {
      prevBtn.classList.add('disabled');
    } else {
      prevBtn.classList.remove('disabled');
    }
    
    if (scrollLeft >= maxScroll - 5 || maxScroll <= 0) {
      nextBtn.classList.add('disabled');
    } else {
      nextBtn.classList.remove('disabled');
    }
  }
  
  // Initialize arrows on page load
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
      updateArrows('weekly');
      updateArrows('special');
    }, 100);
    
    // Update arrows when tabs are switched
    const weeklyTab = document.getElementById('pills-home-tab');
    const specialTab = document.getElementById('pills-profile-tab');
    
    if (weeklyTab) {
      weeklyTab.addEventListener('shown.bs.tab', function() {
        setTimeout(() => updateArrows('weekly'), 100);
      });
    }
    
    if (specialTab) {
      specialTab.addEventListener('shown.bs.tab', function() {
        setTimeout(() => updateArrows('special'), 100);
      });
    }
    
    // Update arrows on window resize
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => {
        updateArrows('weekly');
        updateArrows('special');
      }, 250);
    });
    
    // Update arrows on scroll (in case user scrolls manually)
    const weeklyContainer = document.getElementById('weeklyCarousel')?.parentElement;
    const specialContainer = document.getElementById('specialCarousel')?.parentElement;
    
    if (weeklyContainer) {
      weeklyContainer.addEventListener('scroll', () => updateArrows('weekly'));
    }
    if (specialContainer) {
      specialContainer.addEventListener('scroll', () => updateArrows('special'));
    }
  });
</script>

{% endblock %}
