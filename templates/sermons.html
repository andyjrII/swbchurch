{% extends "master.html" %}

<!-- title -->
{% block title %} SWBC | Download Sermons {% endblock %}

<!-- content -->
{% block content %}

<!-- header -->
<header id="sermons" class="sermons_header mb-5">
  <div class="overlay text-white text-center">
    <h1 class="display-2 font-weight-bold my-3">Download Sermons</h1>
  </div>
</header>

<!-- SEARCH Section  -->
<div
  class="container-fluid search-overlay text-center text-light has-height-md middle-items pt-5"
>
  <div class="">
    <form method="get">
      <div class="row mb-5 align-items-center justify-content-center">
        <div class="col-md-3 col-sm-6 my-2">{{ form.title }}</div>
        <div class="col-md-3 col-sm-6 my-2">{{ form.author }}</div>
        <div class="col-md-2 col-sm-4 my-2">{{ form.year }}</div>
        <div class="col-md-2 col-sm-8 my-2">
          <button type="submit" class="btn btn-primary w-100" id="rounded-btn" style="font-size: 14px; font-weight: 600; padding: 10px 20px; height: 100%;">
            SEARCH
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- ALL SERMONS Section -->
  <div class="container-fluid bg-dark text-light py-4">
    <div class="sermon-showcase">
      <h3 class="showcase-header">All Sermons</h3>
      
      <div class="showcase-wrapper">
        <div class="showcase-grid">
          {% for sermon in paginated_sermons %}
          <article class="sermon-album">
            <div class="album-art">
              <img src="{{sermon.feature_pic.url}}" alt="{{sermon.title}}" loading="lazy" />
              {% if sermon.has_audio %}
              <div class="album-action">
                <a href="{% url 'download_sermon' sermon.id %}" download class="action-btn">
                  <i class="ti-download"></i>
                </a>
              </div>
              {% endif %}
            </div>
            <h4 class="album-title">{{sermon.title}}</h4>
            <p class="album-artist">{{sermon.author}}</p>
            {% if sermon.date_preached %}
            <time class="album-date">{{sermon.date_preached|date:"M. d, Y"}}</time>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <!-- PAGINATION Section -->
  {% with paginated_items=paginated_sermons %}
    {% include 'partials/pagination.html' %}
  {% endwith %}

  <!-- WEEKLY TOP SERMONS Section -->
  {% if top_sermons %}
  <div class="container-fluid bg-dark text-light py-5">
    <div class="sermon-showcase">
      <h3 class="showcase-header">Weekly Top Sermons</h3>
      
      <div class="showcase-wrapper">
        <div class="top-sermons-grid">
          {% for sermon in top_sermons %}
          <article class="sermon-album">
            <div class="album-art">
              <img src="{{sermon.feature_pic.url}}" alt="{{sermon.title}}" loading="lazy" />
              {% if sermon.has_audio %}
              <div class="album-action">
                <a href="{% url 'download_sermon' sermon.id %}" download class="action-btn">
                  <i class="ti-download"></i>
                </a>
              </div>
              {% endif %}
            </div>
            <h4 class="album-title">{{sermon.title}}</h4>
            <p class="album-artist">{{sermon.author}}</p>
            {% if sermon.date_preached %}
            <time class="album-date">{{sermon.date_preached|date:"M. d, Y"}}</time>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  {% endblock %}
</div>
